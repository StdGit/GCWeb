/*!
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 * v4.0.32-development - 2019-10-30
 *
 */
!function(A,r){"use strict";var e=".wb-tblvalidator",t=".wb-tableparser",a=r.doc,d="idsheaders"+e,s="scope"+e,i="simple"+e,H="showhtml"+e,L="log"+e,M="#formtablevalidator",o={"%tblparser1":"Only table can be parsed with this parser","%tblparser2":"The table was already parsed.","%tblparser3":"The first colgroup must be spanned to represent the header column group","%tblparser3Tech":6,"%tblparser4":" You have an invalid cell inside a row description","%tblparser4Tech":4,"%tblparser5":"You need at least one data colgroup, review your table structure","%tblparser5Tech":8,"%tblparser6":"The Lowest column group level have been found, You may have an error in you column structure","%tblparser6Tech":9,"%tblparser7":"The initial colgroup should group all the header, there are no place for any data cell","%tblparser7Tech":4,"%tblparser9":"Error in you header row group, there are cell that are crossing more than one colgroup","%tblparser9Tech":4,"%tblparser10":"The header group cell used to represent the data at level must encapsulate his group","%tblparser10Tech":7,"%tblparser12":"Last summary row group already found","%tblparser12Tech":3,"%tblparser13":"Error, Row group not calculated","%tblparser14":"You can not have a summary at level under 0, add a group header or merge a tbody togheter","%tblparser14Tech":3,"%tblparser15":"tr element need to only have th or td element as his child","%tblparser16":"The row do not have a good width","%tblparser16Tech":12,"%tblparser17":"The layout cell is not empty","%tblparser17Tech":11,"%tblparser18":"Row group header not well structured.","%tblparser18Tech":7,"%tblparser21":"Move the row used as the column cell heading in the thead row group","%tblparser21Tech":7,"%tblparser23":"Avoid the use of have paralel row headers, it's recommended do a cell merge to fix it","%tblparser23Tech":3,"%tblparser24":"For a data row, the heading hiearchy need to be the Generic to the specific","%tblparser24Tech":3,"%tblparser25":"You have a problematic key cell","%tblparser25Tech":0,"%tblparser26":"You can not define any row before the thead group","%tblparser26Tech":12,"%tblparser27":"thead element need to only have tr element as his child","%tblparser27Tech":12,"%tblparser29":"You cannot span cell in 2 different rowgroup","%tblparser29Tech":12,"%tblparser30":"Use the appropriate table markup","%tblparser30Tech":12,"%tblparser31":"Internal Error, Number of virtual column must be set [ function processColgroup( ) ]","%tblparser32":"Check your row cell headers structure","%tblparser32Tech":3,"%tblparser34":"Mark properly your data row group.","%tblparser34Tech":1,"%tblparser35":"Column, col element, are not correctly defined","%tblparser35Tech":12},c=["keycell-techniques.html","rowgrouping-techniques.html","summariesrowgroup-techniques.html","headerrowgroupstructure-techniques.html","rowheader-description-techniques.html","rowgroupheader-description-techniques.html","colgroupheader-techniques.html","headercolgroupstructure-techniques.html","datacolgroup-techniques.html","colgroupsummary-techniques.html","colheader-description-techniques.html","layoutcell-techniques.html","https://html.spec.whatwg.org/multipage/tables.html#tables"],h=["Defining a Key Cell","Defining a Data Row Group in a Data Table","Summaries a Data Row Group in a Data Table","Structuring the Header Row in a Data Table","Describing a Row Header Cell in a Data Table","Describing a Row Group Header Cell in a Data Table","Defining Column Group Header in a Data Table","Structuring the Header Column Cell in a Data Table","Defining a Data Column Group in a Data Table","Summaries a Data Column Group in a Data Table","Describing a Column Header Cell in a Data Table","Defining a Layout Cell in a Data Table","HTML Standard: Tabular data"];a.on("submit",M,function(){return!1}),a.on(H,"#visualoutput > table:eq( 0 )",function(e){var r,t=e.target,a=A("#results");if(e.currentTarget!==t)return!0;r=("<table>"+A(t).html()+"</table>").replace(/<col>/g,"<col />").replace(/<br>/g,"<br />").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),a.html("<pre class='prettyprint'><code>"+r+"</code></pre>"),"function"==typeof window.prettyPrint&&window.prettyPrint(),A(M).trigger({type:L,logtype:"Information",logmessage:"Result Displayed"})}),a.on(d,"#visualoutput > table:eq( 0 )",function(e){var r,t,a,l,o,d,s,i,c,h,p,u,n,g,m,b,w,v,f,y,T,k,S,R,C=e.target,D=r,q=!1;if(e.currentTarget!==C)return!0;for(A(M).trigger({type:L,logtype:"Information",logmessage:"Accessibility Strategy: Ids/Headers"}),t=(r=A(C)).data().tblparser,h=r.data().wbvalidateoptions.prefix||"wb-tablevalidated",a=0;a<t.theadRowStack.length;a+=1)for(i=t.theadRowStack[a],s=0;s<i.cell.length;s+=1)1!==(c=i.cell[s]).type&&7!==c.type||0<s&&c.uid===i.cell[s-1].uid||0<a&&c.uid===t.theadRowStack[a-1].cell[s].uid||(void 0!==(d=A(c.elem).attr("id"))&&""!==d||(d=h+c.uid,A(c.elem).attr("id",d)),0<a&&(p=A(t.theadRowStack[a-1].cell[s].elem).attr("id"),void 0!==A(t.theadRowStack[a-1].cell[s].elem).attr("headers")&&(p=A(t.theadRowStack[a-1].cell[s].elem).attr("headers")+" "+p),A(c.elem).attr("headers",p),void 0!==A(c.elem).attr("headers")&&""!==A(c.elem).attr("headers")||A(c.elem).removeAttr("headers")),c.descCell&&(A(c.descCell.elem).attr("headers",d),void 0!==A(c.descCell.elem).attr("headers")&&""!==A(c.descCell.elem).attr("headers")||A(c.descCell.elem).removeAttr("headers"),void 0!==(u=A(c.descCell.elem).attr("id"))&&""!==u||A(c.descCell.elem).attr("id",u),A(c.elem).attr("aria-describedby",u)));for(a=0;a<t.row.length;a+=1){if(b=m=g=n="",(i=t.row[a]).headerset&&!i.idsrowheaders){for(s=0;s<i.headerset.length;s+=1)void 0!==(d=A(i.headerset[s].elem).attr("id"))&&""!==d||(d=h+i.headerset[s].uid,A(i.headerset[s].elem).attr("id",d)),n=n?n+" "+d:d;i.idsrowheaders=n}if(i.header)for(s=0;s<i.header.length;s+=1)void 0!==(d=A(i.header[s].elem).attr("id"))&&""!==d||(d=h+i.header[s].uid,A(i.header[s].elem).attr("id",d)),g=g?g+" "+d:d;for(g=i.idsrowheaders?i.idsrowheaders+" "+g:g,s=0;s<i.cell.length;s+=1)if(!i.cell[s].processed&&(0===s||0<s&&i.cell[s].uid!==i.cell[s-1].uid)){if(w="",(c=i.cell[s]).col&&!c.col.dataheaders){if(y=f="",(v=c.col).headerLevel)for(l=0;l<v.headerLevel.length;l+=1)void 0!==(d=A(v.headerLevel[l].elem).attr("id"))&&""!==d||(d=h+v.headerLevel[l].uid,A(v.headerLevel[l].elem).attr("id",d)),y=y?y+" "+d:d;if(v.header)for(l=0;l<v.header.length;l+=1)void 0!==(d=A(v.header[l].elem).attr("id"))&&""!==d||(d=h+v.header[l].uid,A(v.header[l].elem).attr("id",d)),f=f?f+" "+d:d;v.dataheaders=y?y+" "+f:f}if(c.col&&c.col.dataheaders&&(w=c.col.dataheaders),1===c.type&&(A(c.elem).attr("headers",(w||"")+(i.idsrowheaders&&w?" ":"")+(i.idsrowheaders?i.idsrowheaders:"")+(i.idsrowheaders&&b||w&&b&&!i.idsrowheaders?" ":"")+(b||"")),void 0!==A(c.elem).attr("headers")&&""!==A(c.elem).attr("headers")||A(c.elem).removeAttr("headers"),void 0!==(S=A(c.elem).attr("id"))&&""!==S||(S=h+c.uid,A(c.elem).attr("id",S)),b=(""!==b?b+" ":"")+S),2===c.type||3===c.type){if(m=g,c.addcolheaders)for(l=0;l<c.addcolheaders.length;l+=1)void 0!==(d=A(c.addcolheaders[l].elem).attr("id"))&&""!==d||(d=h+c.addcolheaders[l].uid,A(c.addcolheaders[l].elem).attr("id",d)),w=w?w+" "+d:d;if(c.addrowheaders)for(l=0;l<c.addrowheaders.length;l+=1)void 0!==(d=A(c.addrowheaders[l].elem).attr("id"))&&""!==d||(d=h+c.addrowheaders[l].uid,A(c.addrowheaders[l].elem).attr("id",d)),m=m?m+" "+d:d;A(c.elem).attr("headers",(w||"")+(m&&w?" ":"")+(m||"")),void 0!==A(c.elem).attr("headers")&&""!==A(c.elem).attr("headers")||A(c.elem).removeAttr("headers")}if(4===c.type||5===c.type){if(R="",c.describe)for(l=0;l<c.describe.length;l+=1)void 0!==(d=A(c.describe[l].elem).attr("id"))&&""!==d||(d=h+c.describe[l].uid,A(c.describe[l].elem).attr("id",d)),R=R?R+" "+d:d,5!==c.type||A(c.describe[l].elem).attr("aria-describedby")||(void 0!==(d=A(c.elem).attr("id"))&&""!==d||(d=h+c.uid,A(c.elem).attr("id",d)),A(c.describe[l].elem).attr("aria-describedby",d));4!==c.type?(A(c.elem).attr("headers",(w||"")+(w&&R?" ":"")+(R||"")),void 0!==A(c.elem).attr("headers")&&""!==A(c.elem).attr("headers")||A(c.elem).removeAttr("headers")):A(c.elem).attr("aria-describedby")||(A(c.elem).attr("aria-describedby",R||""),A(c.elem).attr("headers",w||""),void 0!==A(c.elem).attr("headers")&&""!==A(c.elem).attr("headers")||A(c.elem).removeAttr("headers"))}c.processed=!0}}for(a=0;a<t.lstrowgroup.length;a+=1)if(0<t.lstrowgroup[a].headerlevel.length)for(s=0;s<t.lstrowgroup[a].headerlevel.length;s+=1)t.lstrowgroup[a].headerlevel[s].descCell&&(void 0!==(T=A(t.lstrowgroup[a].headerlevel[s].descCell.elem).attr("id"))&&""!==T||(T=h+t.lstrowgroup[a].headerlevel[s].descCell.uid,A(t.lstrowgroup[a].headerlevel[s].descCell.elem).attr("id",T)),A(t.lstrowgroup[a].headerlevel[s].elem).attr("aria-describedby",T),void 0!==(d=A(t.lstrowgroup[a].headerlevel[s].elem).attr("id"))&&""!==d||(d=h+t.lstrowgroup[a].headerlevel[s].uid,A(t.lstrowgroup[a].headerlevel[s].elem).attr("id",d)),A(t.lstrowgroup[a].headerlevel[s].descCell.elem).attr("headers",d));for(a=0;a<t.colgroup.length;a+=1)if(void 0===t.colgroup[a].elem){for(o=A("<colgroup></colgroup>"),s=0;s<t.colgroup[a].col.length;s+=1)k=A("<col />"),A(o).append(k),t.colgroup[a].col[s].elem=A(k).get(0),A(k).data().tblparser=t.colgroup[a].col[s];q?A(q).after(o):A(D).has("caption")?A("caption:eq( 0 )",D).after(o):A(D).prepend(o),q=o,t.colgroup[a].elem=A(o).get(0),A(o).data().tblparser=t.colgroup[a]}else for(o=t.colgroup[a].elem,A(o).removeAttr("span"),s=0;s<t.colgroup[a].col.length;s+=1)void 0===t.colgroup[a].col[s].elem&&(k=A("<col />"),A(o).append(k),t.colgroup[a].col[s].elem=A(k).get(0),A(k).data().tblparser=t.colgroup[a].col[s]);r.trigger(H)}),a.on(s,"#visualoutput > table:eq( 0 )",function(e){var r,t,a,l,o=e.target;if(e.currentTarget!==o)return!0;for(A(M).trigger({type:L,logtype:"Information",logmessage:"Accessibility Strategy: Scope"}),t=(r=A(o)).data().tblparser,a=0;a<t.lstrowgroup.length;a+=1)for(t.lstrowgroup[a].headerlevel&&t.lstrowgroup[a].headerlevel[0]&&A(t.lstrowgroup[a].headerlevel[0].elem).attr("scope","rowgroup"),l=0;l<t.lstrowgroup[a].row.length;l+=1)1===t.lstrowgroup[a].row[l].cell[0].type&&A(t.lstrowgroup[a].row[l].cell[0].elem).attr("scope","row");if(2===t.theadRowStack.length)for(a=1===t.colgroup[0].type?t.colgroup[0].end:0;a<t.theadRowStack[0].cell.length;a+=1)0!==a&&t.theadRowStack[0].cell[a-1].uid===t.theadRowStack[0].cell[a].uid||A(t.theadRowStack[0].cell[a].elem).attr("scope","colgroup");if(1===t.theadRowStack.length||2===t.theadRowStack.length)for(a=0;a<t.theadRowStack[1===t.theadRowStack.length?0:1].cell.length;a+=1)1===t.theadRowStack[1===t.theadRowStack.length?0:1].cell[a].type&&A(t.theadRowStack[1===t.theadRowStack.length?0:1].cell[a].elem).attr("scope","col");r.trigger(H)}),a.on(i,"#visualoutput > table:eq( 0 )",function(e){var r=e.target;if(e.currentTarget!==r)return!0;A(M).trigger({type:L,logtype:"Information",logmessage:"Accessibility Strategy: Nothing"}),A(r).trigger(H)}),a.on("parsecomplete.wb-tableparser","#visualoutput > table:eq( 0 )",function(e){var r,t,a,l,o=e.target;if(e.currentTarget!==o)return!0;if(a=(r=A(o)).data().tblparser,"headers"===(t=r.data().wbvalidateoptions).accessibilty||2<a.theadRowStack.length||a.desccell||a.keycell||2===a.colgroup[0].type&&2<a.colgroup[0].col.length)r.trigger(d);else{for(l=0;l<a.lstrowgroup.length;l+=1)if(!(2===a.lstrowgroup[l].type&&a.lstrowgroup[l].level<=2||3===a.lstrowgroup[l].type&&0===a.lstrowgroup[l].level))return void r.trigger(d);if(a.colgroup[0]&&1===a.colgroup[0].type&&6===a.theadRowStack[0].cell[0].type)l=a.colgroup[0].end;else{if(2!==a.colgroup[0].type)return void r.trigger(d);l=0}for(;l<a.theadRowStack[0].cell.length;l+=1)if(a.theadRowStack[0].cell[l].colgroup&&(a.theadRowStack[0].cell[l].colgroup.start===a.theadRowStack[0].cell[l].colgroup.end||a.theadRowStack[0].cell[l].colgroup.start!==a.theadRowStack[0].cell[l].colpos||a.theadRowStack[0].cell[l].colgroup.end!==a.theadRowStack[0].cell[l].colpos+a.theadRowStack[0].cell[l].width-1||2!==a.theadRowStack[0].cell[l].colgroup.type))return void r.trigger(d);"auto"===t.accessibilty&&a.theadRowStack.length<=1&&(1===a.lstrowgroup.length||2===a.lstrowgroup[0].type&&3===a.lstrowgroup[1].type&&0===a.lstrowgroup[1].level)?r.trigger(i):"auto"!==t.accessibilty&&"scope"!==t.accessibilty?r.trigger(d):r.trigger(s)}}),a.on("error"+t,"#visualoutput > table:eq( 0 )",function(e){var r,t=e.err,a="#"+t+", ",l="";l=o["%tblparser"+t],void 0!==o["%tblparser"+t+"Tech"]&&(l="<a href='"+c[r=o["%tblparser"+t+"Tech"]]+"' title='"+h[r]+"'>"+l+"</a>"),a+=l,A(M).trigger({type:L,logtype:"Error",logmessage:a})}),a.on("warning"+t,"#visualoutput > table:eq( 0 )",function(e){var r,t=e.err,a="#"+t+", ",l="";l=o["%tblparser"+t],void 0!==o["%tblparser"+t+"Tech"]&&(l="<a href='"+c[r=o["%tblparser"+t+"Tech"]]+"' title='"+h[r]+"'>"+l+"</a>"),a+=l,A(M).trigger({type:L,logtype:"Warning",logmessage:a})}),a.on("click","#validatetable",function(){var e;A("#visualoutput").empty(),A("#errors").empty(),A("#visualoutput").append(A("#inputsourcecode").val()),(e=A("#visualoutput > table:eq( 0 )")).length||(A(M).trigger({type:L,logtype:"Error",logmessage:"No HTML Table code provided in input"}),alert("Please add HTML Table code"),A("#inputsourcecode").focus()),A("#chkCleanMarkup").is(":checked")||(A("[ headers ]",e).each(function(){A(this).removeAttr("headers")}),A("[ aria-describedby ]",e).each(function(){A(this).removeAttr("aria-describedby")}),A("[ id ]",e).each(function(){A(this).removeAttr("id")}),A("[ scope ]",e).each(function(){A(this).removeAttr("scope")}),A("[ class ]",e).each(function(){A(this).removeAttr("class")})),e.data().wbvalidateoptions=function(e){var r={};A("#chkHassum").is(":checked")&&e.addClass("hassum");A("#access-1").is(":checked")?r.accessibilty="auto":A("#access-2").is(":checked")?r.accessibilty="scope":r.accessibilty="headers";r.prefix=A("#idprefix").val(),A("#uniqueprefix").is(":checked")&&(r.prefix="tbl"+((new Date).getTime()+"-").substring(5));return r}(e),Modernizr.load({load:["site!deps/tableparser"+r.getMode()+".js"],complete:function(){e.trigger("passiveparse.wb-tableparser")}}),e.addClass("table table-lined")}),a.on(L,M,function(e){var r="<li><strong>"+e.logtype+":</strong> "+e.logmessage+"</li>";A("#errorslist").length||A("#errors").append("<ul id='errorslist'></ul>"),A("#errorslist").append(r)})}(jQuery,wb);